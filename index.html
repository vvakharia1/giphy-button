<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Giphy Button Homework</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<!-- Title for the page -->
<h1>
    <img src="https://images-na.ssl-images-amazon.com/images/I/419fOYZcgjL._SX425_.jpg" height="200px" width="200px">
</h1>

<!-- Creating the <div> that holds the buttons -->

    <div id="buttons">
        <button data-person="Michael Scott">
            Michael Scott
        </button>
        <button data-person="Pam Beesly">
            Pam Beesly
        </button>
        <button data-person="Jim Halpert">
            Jim Halpert
        </button>
        <button data-person="Dwight Schrute">
            Dwight Schrute
        </button>
        <button data-person="Angela Martin">
            Angela Martin
        </button>
        <button data-person="Toby Flenderson">
            Toby Flenderson
        </button>
        <button data-person="Kelly Kapoor">
            Kelly Kapoor
        </button>
        <button data-person="Ryan Howard">
            Ryan Howard
        </button>
        <button data-person="Stanley Hudson">
            Stanley Hudson
        </button>
    </div>

<!-- Creating the <div> to hold gif images -->
    <div id="gifs-here">
    </div>

<!-- Creating click action on buttons and AJAX request -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

    $("button").on("click", function() {
    var person = $(this).attr("data-person"); // this is a reference to ANY button on the page 
    var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + person + "&api_key=GiQqAxsCupPhVzHbrsvukO5U6TAAADdG";
    
    $.ajax({
        url: queryURL,
        method: "GET"
    })

    .then(function(response) {
        console.log(response);
        var topics = response.data;

        for (var i = 0; i < topics.length; i++) {
        
        var gifDiv = $("<div>"); // creates a div to hold the "topic" info when run through the loop
        var rating = topics[i].rating; // rating is pulled from the response
        var gifP = $("<p>").text("Rating: " + rating); // creates a p tag that allows the rating to be displayed on the page

        var personImage = $("<img>"); // creates a img tag to hold the img pulled from response
        personImage.attr("src", topics[i].images.fixed_height); // creates attribute to pull image from response

        gifDiv.prepend(gifP); // adds the p tag text to the main gifDiv
        gifDiv.prepend(personImage); // adds the img to the main gifDiv

        $("#gifs-here").prepend(gifDiv); // adds the gifDiv to the main Div that holds the ajax request
        }

    });

    });

    </script>
    
</body>
</html>